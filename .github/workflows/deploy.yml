name: Deploy Django App

on:
push:
branches:
- main

jobs:
deploy:
runs-on: ubuntu-latest

```
steps:
- name: Checkout code
  uses: actions/checkout@v3

- name: Set up Python 3.11
  uses: actions/setup-python@v4
  with:
    python-version: '3.11'

- name: Install system dependencies
  run: |
    sudo dnf install -y python3.11 python3.11-devel gcc make

- name: Create virtual environment
  run: |
    python3.11 -m venv .venv
    source .venv/bin/activate
    python -m pip install --upgrade pip setuptools wheel

- name: Install Python dependencies
  run: |
    source .venv/bin/activate
    pip install -r requirements.txt
    pip install python-dateutil reportlab  # ensure missing modules installed

- name: Run Django migrations
  run: |
    source .venv/bin/activate
    python manage.py migrate --noinput

- name: Collect static files
  run: |
    source .venv/bin/activate
    python manage.py collectstatic --noinput

- name: Restart server (example using systemd)
  run: |
    sudo systemctl restart my-django-app
```
