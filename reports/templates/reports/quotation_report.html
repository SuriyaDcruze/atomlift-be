{% extends "reports/base_report.html" %}

{% block report_title %}Quotation Reports{% endblock %}

{% block export_links %}
<a href="{% url 'reports:export_quotations_csv' %}">
    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
    Export CSV
</a>
<a href="{% url 'reports:export_quotations_xlsx' %}">
    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
    Export XLSX
</a>
{% endblock %}

{% block filters %}
<div class="filter-group">
    <h3>Period</h3>
    <div class="filter-group-content">
        <select name="period">
            <option value="ALL TIME" {% if selected_period == 'ALL TIME' %}selected{% endif %}>ALL TIME</option>
            <option value="Today" {% if selected_period == 'Today' %}selected{% endif %}>Today</option>
            <option value="This Week" {% if selected_period == 'This Week' %}selected{% endif %}>This Week</option>
            <option value="This Month" {% if selected_period == 'This Month' %}selected{% endif %}>This Month</option>
        </select>
    </div>
</div>
<div class="filter-group">
    <h3>Customer</h3>
    <div class="filter-group-content">
        <select name="customer">
            <option value="ALL" {% if selected_customer == 'ALL' %}selected{% endif %}>ALL</option>
            {% for customer in customers %}
            <option value="{{ customer }}" {% if selected_customer == customer %}selected{% endif %}>{{ customer }}</option>
            {% endfor %}
        </select>
    </div>
</div>
<div class="filter-group">
    <h3>Type</h3>
    <div class="filter-group-content">
        <select name="status">
            <option value="ALL" {% if selected_status == 'ALL' %}selected{% endif %}>ALL</option>
            <option value="Parts/Peripheral Quotation" {% if selected_status == 'Parts/Peripheral Quotation' %}selected{% endif %}>Parts/Peripheral Quotation</option>
            <option value="Repair" {% if selected_status == 'Repair' %}selected{% endif %}>Repair</option>
            <option value="AMC Renewal Quotation" {% if selected_status == 'AMC Renewal Quotation' %}selected{% endif %}>AMC Renewal Quotation</option>
            <option value="AMC" {% if selected_status == 'AMC' %}selected{% endif %}>AMC</option>
        </select>
    </div>
</div>
{% endblock %}

{% block table_content %}
<table>
    <thead>
        <tr>
            <th>NUMBER</th>
            <th>DATE</th>
            <th>NAME</th>
            <th>AMC DETAILS</th>
            <th>QUOTATION TYPE</th>
            <th>AMOUNT</th>
            <th>GST</th>
            <th>NET AMOUNT</th>
            <th>LIFTS</th>
        </tr>
    </thead>
    <tbody>
        {% for quotation in quotations %}
        <tr>
            <td>{{ quotation.reference_id|default:quotation.id }}</td>
            <td>{{ quotation.date }}</td>
            <td>{{ quotation.customer.site_name|default:"N/A" }}</td>
            <td>{{ quotation.amc_type|default:"N/A" }}</td>
            <td>{{ quotation.type|default:"N/A" }}</td>
            <td>{{ quotation.amount|default:"0" }}</td>
            <td>{{ quotation.gst|default:"0%" }}</td>
            <td>{{ quotation.net_amount|default:"0" }}</td>
            <td>{{ quotation.lifts|default:"No Lifts" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="9" class="no-data">No quotation reports found for the selected period</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block pagination %}
Showing 0 to {{ quotations|length }} of {{ quotations|length }} entries
{% endblock %}